import streamlit as st
from utils.model_utils import load_models, detect_cyberbullying, rephrase_text

st.title("ğŸ›¡ï¸ Cyberbullying Detection & Rephrasing")
st.caption("Using BERT (Detection) + T5 (Rephrasing) - API Free")

bert_model, tokenizer, t5_model, t5_tokenizer = load_models()

user_input = st.text_area("âœï¸ Enter a message:")

if st.button("Analyze"):
    if user_input.strip() == "":
        st.warning("Please enter a message.")
    else:
        label = detect_cyberbullying(user_input, bert_model, tokenizer)
        if label == 1:
            st.error("âš ï¸ Cyberbullying Detected!")
            rephrased = rephrase_text(user_input, t5_model, t5_tokenizer)
            st.success("ğŸ’¡ Suggested Rewrite:")
            st.write(rephrased)
        else:
            st.success("âœ… No Cyberbullying Detected!")
